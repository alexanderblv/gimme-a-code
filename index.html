<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="img/icon.svg">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="src/style.css">
    <title>Gimme a code</title>
    <style>
        /* Custom cursor style for the entire document */
        body {
            cursor: url('img/star.png'), auto;
        }
        
        /* Modified styles for the result GIFs - now positioned on top */
        .result-gif-container {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            overflow: hidden;
            z-index: 10; /* Place it above the content */
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none; /* Allow clicking through */
        }
        
        .result-gif {
            width: 100%; /* Set a fixed width percentage */
            height: auto; /* Maintain aspect ratio */
            max-height: 100%; /* Don't exceed container height */
            object-fit: contain;
            filter: contrast(1.1) brightness(0.9) opacity(0.5); /* 50% opacity */
            transition: all 0.5s ease;
        }
        
        .gif-overlay {
            display: none; /* Remove the gradient overlay */
        }
        
        .gif-glitch {
            animation: gif-glitch-anim 2s infinite;
        }
        
        @keyframes gif-glitch-anim {
            0%, 100% {
                transform: translateX(0);
                filter: opacity(0.5) contrast(1.1) brightness(0.9);
            }
            92% {
                transform: translateX(0);
                filter: opacity(0.5) contrast(1.1) brightness(0.9);
            }
            93% {
                transform: translateX(-2px);
                filter: opacity(0.5) hue-rotate(90deg) saturate(1.5);
            }
            94% {
                transform: translateX(3px);
                filter: opacity(0.5) invert(0.1);
            }
            96% {
                transform: translateX(-2px);
                filter: opacity(0.5) contrast(1.1) brightness(0.9);
            }
            98% {
                transform: translateX(0);
                filter: opacity(0.5) brightness(0.8) contrast(1.2);
            }
        }
        
        /* Modified overlay content layout to work with GIF on top */
        .overlay-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative; /* To position properly under the background gif */
            background: rgba(0, 0, 0, 0.85); /* More opaque background for better contrast */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 255, 209, 0.5);
            border: 1px solid rgba(0, 255, 209, 0.3);
            z-index: 5; /* Below the GIF but above other content */
        }
        
        /* Removed glitch effect from result text */
        #result-text {
            color: #00FFD1;
            text-shadow: 0 0 10px rgba(0, 255, 209, 0.5);
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 15px;
            text-align: center;
            position: relative; /* Make text appear above GIF */
            z-index: 15;
        }
        
        /* Game description text styling */
        .game-description {
            color: #a0ffed;
            text-shadow: 0 0 8px rgba(0, 255, 209, 0.4);
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.1em;
            line-height: 1.5;
        }
        
        /* Styles for falling images in terminal background */
        .falling-image {
            position: absolute;
            width: 40px;
            height: 40px;
            opacity: 0.3;
            pointer-events: none;
            z-index: 1;
            animation: fall 15s infinite linear;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-100%) rotate(0deg);
                opacity: 0.2;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(1000%) rotate(360deg);
                opacity: 0.2;
            }
        }
        
        /* Modified taskbar style with purple color */
        .taskbar {
            background: linear-gradient(to right, #330066, #6600cc);
            border-top: 1px solid #9900ff;
            box-shadow: 0 0 15px rgba(153, 0, 255, 0.5);
        }
        
        /* Game stats for final screen - updated z-index */
        .final-game-stats {
            margin-top: 20px;
            margin-bottom: 20px;
            background: rgba(0, 0, 0, 0.8); /* More opaque for better contrast */
            border: 1px solid #00FFD1;
            border-radius: 5px;
            padding: 15px;
            width: 80%;
            max-width: 400px;
            position: relative;
            z-index: 15; /* Make stats appear above GIF */
        }
        
        .final-stats-title {
            color: #00FFD1;
            font-family: 'Orbitron', sans-serif;
            text-align: center;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .final-stats-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }
        
        .final-stats-item span {
            color: #fff;
        }
        
        .final-stats-value {
            color: #00FFD1;
            font-weight: bold;
        }
        
        /* Make terminal container relative for falling images */
        .terminal-container {
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        
        /* Terminal console to take all available space */
        .terminal-console {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding-bottom: 0;
        }
        
        /* Terminal credit line styling - position at bottom */
        .terminal-credit {
            color: #ff5edc;
            font-style: italic;
            text-shadow: 0 0 5px rgba(255, 94, 220, 0.7);
            border-top: 1px dashed rgba(255, 94, 220, 0.3);
            padding-top: 8px;
            margin-top: auto; /* Push to bottom */
            font-weight: 600;
            text-align: center;
            padding-bottom: 8px;
        }
        
        /* Make game over overlay responsive */
        #game-over-overlay .overlay-content {
            padding: 20px;
            box-sizing: border-box;
        }
        
        /* Ensure text elements are visible above GIF */
        #game-over-overlay h1, 
        #game-over-overlay h2, 
        #game-over-overlay h3,
        #game-over-overlay button {
            position: relative;
            z-index: 15;
        }
        
        @media (max-height: 700px) {
            .final-game-stats {
                margin: 10px auto;
                padding: 10px;
            }
            
            #result-text, h2, h3 {
                margin: 10px 0;
            }
        }
        
        @media (max-width: 500px) {
            .overlay-content {
                width: 95%;
            }
        }
        
        /* Custom hover style for buttons with star cursor */
        button:hover {
            cursor: url('img/star.png'), auto;
        }
        
        /* Apply star cursor to all clickable elements */
        .member-img, .desktop-icon, .window-button, .taskbar-icon {
            cursor: url('img/star.png'), auto;
        }
        
        /* Add SP1 styles */
        .sp1-logo {
            position: absolute;
            bottom: 10px;
            right: 10px;
            width: 50px;
            height: 50px;
            opacity: 0.7;
            transition: opacity 0.3s;
            z-index: 5;
        }
        
        .sp1-logo:hover {
            opacity: 1;
        }
        
        /* Highlight SP1 verification button */
        #verify-score {
            background: linear-gradient(135deg, #5e0099, #9900ff);
            border-color: #b366ff;
            box-shadow: 0 0 10px rgba(153, 0, 255, 0.7);
            margin-top: 10px;
        }
        
        #verify-score:hover {
            background: linear-gradient(135deg, #7700cc, #aa33ff);
            box-shadow: 0 0 15px rgba(153, 0, 255, 1);
        }
    </style>
</head>
<body>
    <div class="cosmic-background"></div>
    
    <!-- Falling elements background -->
    <div class="falling-elements">
        <!-- Elements will be added dynamically via JavaScript -->
    </div>
    
    <!-- Blinking elements background -->
    <div class="blinking-elements">
        <!-- Elements will be added dynamically via JavaScript -->
    </div>

    <!-- Main Window Container -->
    <div class="window-container">
        <div class="window-titlebar">
            <div class="window-buttons">
                <div class="window-button close"></div>
                <div class="window-button minimize"></div>
                <div class="window-button maximize"></div>
            </div>
            <div class="window-title">GIMME A CODE</div>
        </div>
        
        <div class="window-content">
            <!-- Новая структура заголовка - одна строка с логотипом, таймером и счетчиком -->
            <div class="header-area">
                <!-- Логотип слева -->
                <div class="logo-section">
                    <div class="logo-icon">✨</div>
                    <div class="logo-text">Succinct</div>
                </div>
                
                <!-- Таймер посередине (растягивается) -->
                <div id="timer">
                    <div id="progress"></div>
                    <span>Time left: 20 seconds</span>
                </div>
                
                <!-- Счетчик справа -->
                <div id="score">
                    <span>Codes: 0</span>
                </div>
            </div>
            
            <!-- Новый макет с использованием flex для лучшего распределения пространства -->
            <div class="game-layout">
                <!-- Левая боковая панель с терминалом и статистикой -->
                <div class="terminal-sidebar">
                    <div class="terminal-container">
                        <div class="terminal-console">
                            <div class="terminal-line">$ ./succinct-challenge --initialize</div>
                            <div class="terminal-line">$ Loading assets... Complete</div>
                            <div class="terminal-line">$ Ready to prove your speed...</div>
                            <div class="terminal-line">$ Starting new game session</div>
                            <div class="terminal-line">$ Quantum encryption active</div>
                            <div class="terminal-line">$ Target: Give max codes</div>
                            <div class="terminal-credit">from alexanderblv to Succinct fam with ❤️</div>
                        </div>
                        <!-- Falling images container will be populated by JS -->
                        <div class="terminal-falling-images"></div>
                    </div>
                    
                    <div class="game-stats">
                        <div class="stats-title">Game Statistics</div>
                        <div class="stats-item">
                            <span>Best Score:</span>
                            <span class="stats-value" id="best-score-value">0</span>
                        </div>
                        <div class="stats-item">
                            <span>Avg. Response:</span>
                            <span class="stats-value" id="avg-response-value">0.0s</span>
                        </div>
                        <div class="stats-item">
                            <span>Success Rate:</span>
                            <span class="stats-value" id="success-rate-value">0%</span>
                        </div>
                    </div>
                </div>
                
                <!-- Игровое поле занимает оставшееся пространство - исправлено на 2x4 сетку (8 элементов) -->
                <div id="game-field">
                    <img src="img/member.png" draggable="false" id="m1" class="member-img" style="grid-area: m1;">
                    <img src="img/member.png" draggable="false" id="m2" class="member-img" style="grid-area: m2;">
                    <img src="img/member.png" draggable="false" id="m3" class="member-img" style="grid-area: m3;">
                    <img src="img/member.png" draggable="false" id="m4" class="member-img" style="grid-area: m4;">
                    <img src="img/member.png" draggable="false" id="m5" class="member-img" style="grid-area: m5;">
                    <img src="img/member.png" draggable="false" id="m6" class="member-img" style="grid-area: m6;">
                    <img src="img/member.png" draggable="false" id="m7" class="member-img" style="grid-area: m7;">
                    <img src="img/member.png" draggable="false" id="m8" class="member-img" style="grid-area: m8;">
                </div>
            </div>
            
            <div class="taskbar">
                <div class="taskbar-icons">
                    <div class="taskbar-icon">
                        <img src="img/icon.svg" alt="Computer">
                    </div>
                    <div class="taskbar-icon">
                        <img src="img/Leaderboard.svg" alt="Browser">
                    </div>
                    <div class="taskbar-icon">
                        <img src="img/Explorer.svg" alt="Files">
                    </div>
                    <div class="taskbar-icon">
                        <img src="img/SuperProver.svg" alt="Settings">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Desktop Icons -->
    <div class="desktop-icons">
        <div class="desktop-icon" id="readme-icon">
            <img src="img/git.png" class="desktop-icon-img" alt="PDF">
            <div class="desktop-icon-text">README.git</div>
        </div>
        <div class="desktop-icon" id="project-icon">
            <img src="img/readme.png" class="desktop-icon-img" alt="PDF">
            <div class="desktop-icon-text">alexanderblv X.com</div>
        </div>
    </div>
    
    <!-- Game Start Overlay -->
    <div class="overlay" id="start-overlay">
        <div class="overlay-content">
            <h1>GIMME A CODE</h1>
            <h2>Welcome to the Succinct Challenge</h2>
            <p class="game-description">Yinger POV: Click on the members as fast as you can when they appear. Give out as many codes as possible within the time limit!</p>
            <button class="glitch-button" id="start-button">Start Game</button>
        </div>
    </div>
    
    <!-- Game Over Overlay - модифицировано для отображения GIF поверх контента -->
    <div class="overlay hidden" id="game-over-overlay">
        <div class="overlay-content">
            <h1 id="result-text">Game Over</h1>
            <h2>Your final score: <span id="final-score">0</span> codes</h2>
            
            <h3 id="result-subtext">Can you do better?</h3>
            
            <!-- Added game stats to final screen -->
            <div class="final-game-stats">
                <div class="final-stats-title">Game Statistics</div>
                <div class="final-stats-item">
                    <span>Best Score:</span>
                    <span class="final-stats-value" id="final-best-score-value">0</span>
                </div>
                <div class="final-stats-item">
                    <span>Avg. Response:</span>
                    <span class="final-stats-value" id="final-avg-response-value">0.0s</span>
                </div>
                <div class="final-stats-item">
                    <span>Success Rate:</span>
                    <span class="final-stats-value" id="final-success-rate-value">0%</span>
                </div>
            </div>
            
            <button class="glitch-button" id="restart-button">Play Again</button>
            
            <!-- Result GIF container - теперь размещено ВНУТРИ overlay-content -->
            <div class="result-gif-container">
                <img id="result-gif" src="" alt="Result" class="result-gif">
                <div class="gif-overlay"></div>
            </div>
        </div>
    </div>
    
    <!-- SP1 logo in the corner -->
    <a href="https://docs.succinct.xyz/docs/sp1/introduction" target="_blank" title="Powered by SP1 - Zero-Knowledge Proofs">
        <img src="img/sp1-logo.svg" alt="SP1 Logo" class="sp1-logo">
    </a>
    
    <!-- Load the application script as a module -->
    <script type="module" src="src/app.js"></script>
</body>
</html>
